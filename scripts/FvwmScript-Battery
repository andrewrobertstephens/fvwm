WindowTitle {FvwmScript-Battery}
WindowSize  24 24

Init
Begin
    Set $ICON=(GetOutput {$FVWM_USERDIR/bin/battery_icon} 1 -1)
    ChangeIcon 1 $ICON
End

PeriodicTasks
Begin
    Set $OLDLEVEL = $LEVEL
    Set $LEVEL=(GetOutput {$FVWM_USERDIR/bin/battery_level} 1 -1)
    If $LEVEL == $OLDLEVEL Then
    Begin
        # do nothing
    End
    Else
    Begin
        If $LEVEL < 10 Then
        Begin
		    Do {NotifyBattery}
        End
    End
    Set $OLDICON = $ICON
    Set $ICON=(GetOutput {$FVWM_USERDIR/bin/battery_icon} 1 -1)
    If $ICON == $OLDICON Then
    Begin
        # do nothing
    End
    Else
    Begin
        ChangeIcon 1 $ICON
    End
End

Widget 1
Property
	Size 24 24
	Position 0 0
	Type ItemDraw
	Flags NoReliefString
Main
	Case message of
	SingleClic :
	Begin
		Do {NotifyBattery}
	End
End

